<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.4.&nbsp;What to take care of during execution</title><link rel="stylesheet" type="text/css" href="../css/guides.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="perfcake-user-guide.html" title="PerfCake 7.x"><link rel="up" href="ug.perfcake-features.html" title="Chapter&nbsp;2.&nbsp;PerfCake Features"><link rel="prev" href="ug.perfcake-features.configuration.html" title="2.3.&nbsp;Running PerfCake"><link rel="next" href="ug.perfcake-features.exit-codes.html" title="2.5.&nbsp;Exit codes"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.4.&nbsp;What to take care of during execution</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ug.perfcake-features.configuration.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;2.&nbsp;PerfCake Features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ug.perfcake-features.exit-codes.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="ug.perfcake-features.handling-issues"></a>2.4.&nbsp;What to take care of during execution</h2></div></div></div><p>By default PerfCake performs and initial benchmark to figure out the local system timer
      resolution. This is important to know because some systems (especially virtual machines) might
      have a very low resolution. If the system being measured by PerfCake is faster than the
      shortest period between system timer updates, PerfCake is not capable of reporting correct
      results. The information about the resolution can be found in the log and in the
      output.</p><pre class="programlisting">2016-05-27 12:53:32,888 INFO  {org.perfcake.util.TimerBenchmark} Benchmarking system timer resolution...
2016-05-27 12:53:32,889 INFO  {org.perfcake.util.TimerBenchmark} This system is able to differentiate up to 279ns. A single thread is now able to measure maximum of 3584229 iterations/second.</pre><p>There might be some typos or misconfigurations in the scenario definition. For a serious
      syntax issues with both XML and DSL, appropriate exceptions are thrown. In case of a wrong
      property name configured for any of the components, a warning similar to the following one is
      displayed during the initialization.</p><pre class="programlisting">2016-06-01 22:02:10,776 WARN  [main] {org.perfcake.util.ObjectFactory} It was not possible to reliably configure property fooBar on class org.perfcake.reporting.reporter.ResponseTimeHistogramReporter. You may have a mistake in the scenario, or the class does not allow reading of the property.</pre><p>PerfCake tries to overcome as many issues as it can. For a 100% validity of your
      performance test results, always make sure there are no warning or errors in the log. Such
      issues can be a problem with message template (the template was used without being parsed), a
      reporter with smaller reporting period than 500ms (the reporter is skipped) etc. More critical
      issues are reported with a non-zero exit code. See section <a class="xref" href="ug.perfcake-features.exit-codes.html" title="2.5.&nbsp;Exit codes">Section&nbsp;2.5, &#8220;Exit codes&#8221;</a>. It is also possible to
      configure PerfCake to fail immediately when a Message Sender experiences an error (see
         <code class="code">perfcake.fail.fast</code> property in <a class="xref" href="ug.perfcake-features.configuration.html" title="2.3.&nbsp;Running PerfCake">Section&nbsp;2.3, &#8220;Running PerfCake&#8221;</a>).</p><p>Also pay attention to PerfCake output at the end of the execution.
         <code class="code">DefaultMessageGenerator</code> waits for termination of all threads that were used to
      send the messages. This is configured by the <code class="code">shutdownPeriod</code> property in the
      scenario. The default setting is to wait for 1000ms. If the threads do not manage to terminate
      their work, you can see warnings in the log like in the example below.</p><pre class="programlisting">2016-05-27 12:54:06,027 WARN  {org.perfcake.message.generator.DefaultMessageGenerator} Cannot terminate all sender tasks. Set higher shutdownPeriod for the generator in your scenario. Remaining tasks/threads active: 8/8
2016-05-27 12:54:06,027 WARN  {org.perfcake.ScenarioExecution} There are some blocked threads that were not possible to terminate. The test results might be flawed. This is usually caused by deadlocks or race conditions in the application under test.</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ug.perfcake-features.configuration.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ug.perfcake-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ug.perfcake-features.exit-codes.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">2.3.&nbsp;Running PerfCake&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="perfcake-user-guide.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;2.5.&nbsp;Exit codes</td></tr></table></div></body></html>